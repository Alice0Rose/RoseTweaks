ap_galactic_force_projection = {
	possible = {
		custom_tooltip = {
			fail_text = "requires_ascension_perks_2"
			num_ascension_perks > 1
		}
	}
	modifier = {
		country_power_projection_influence_produces_add = 2
		country_commander_cap_add = 1
		country_naval_cap_add = 100
		command_limit_add = 250
		add_attunement_the_eater_of_worlds = @ascension_perk_attunement1
	}

	potential = {
		NOT = {
			has_ascension_perk = ap_galactic_force_projection
		}
	}

	ai_weight = {
		factor = 10
		modifier = {
			factor = 1.5
			num_owned_planets < 10
		}
		modifier = {
			factor = 1.5
			num_owned_planets < 20
		}
		modifier = {
			factor = 2
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 2
			has_ascension_perk = ap_become_the_crisis
		}
		modifier = {
			factor = 5
			used_naval_capacity_percent > 1.3
		}
		modifier = {
			factor = 4
			used_naval_capacity_percent > 0.9
		}
		modifier = {
			factor = 0.01
			used_naval_capacity_percent < 0.5
		}
		modifier = {
			factor = 0.01
			has_monthly_income = {
				resource = alloys
				value < 0
			}
		}
	}
}

ap_executive_vigor = {
	modifier = {
		country_edict_fund_add = 100
		council_agenda_progress_speed = 0.15
		sector_max_jumps_add = 2
		add_attunement_the_instrument_of_desire = @ascension_perk_attunement1
	}

	potential = {
		NOT = {
			has_ascension_perk = ap_executive_vigor
		}
	}

	ai_weight = {
		factor = 30 #it's better than average
	}
}

ap_transcendent_learning = {
	modifier = {
		country_scientist_cap_add = 2
		species_leader_exp_gain = 0.25
		leaders_upkeep_mult = -0.15
		leader_lifespan_mult = 0.1
	}

	potential = {
		NOT = {
			has_ascension_perk = ap_transcendent_learning
		}
	}

	ai_weight = {
		factor = 10
	}
}

ap_master_builders = {
	possible = {
		custom_tooltip = {
			fail_text = "requires_ascension_perks_2"
			num_ascension_perks > 1
		}
		custom_tooltip = {
			fail_text = "requires_mega_engineering"
			has_technology = tech_mega_engineering
		}
	}
	modifier = {
		megastructure_build_speed_mult = 0.5
		country_megastructure_build_cap_add = 1
		planet_building_capacity_add = 1
	}

	potential = {
		host_has_dlc = "Utopia"
		NOT = {
			has_ascension_perk = ap_master_builders
		}
	}

	ai_weight = {
		factor = 10
		modifier = {
			factor = 0.5
			has_galactic_wonders = no
		}
		modifier = {
			factor = 2
			has_ethic = ethic_pacifist
		}
		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_pacifist
		}
		modifier = {
			factor = 2
			has_galactic_wonders = yes
		}
	}
}

ap_arcology_project = {
	potential = {
		host_has_dlc = "Megacorp"
		OR = {
			is_regular_empire = yes
			has_valid_civic = civic_machine_servitor
		}
		NOT = {
			has_ascension_perk = ap_arcology_project
		}
	}

	possible = {
		custom_tooltip = {
			fail_text = "requires_technology_housing_arcology"
			OR = { 
				has_technology = tech_housing_2
				has_technology = tech_housing_agrarian_idyll
			}
		}
		custom_tooltip = {
			fail_text = "requires_ascension_perks_2"
			num_ascension_perks > 1
		}
	}

	on_enabled = {
		if = {
			limit = {
				NOT = { has_valid_civic = civic_agrarian_idyll }
			}
			
			custom_tooltip = "allow_arcology_project"
			custom_tooltip = "decision_arcology_project_effects"
			custom_tooltip = "allow_natural_arcologies_newline"
		}
		else = {
			custom_tooltip = "allow_natural_arcologies"
		}
		custom_tooltip = "decision_rose_natural_arcologies_effects"
	}

	modifier = {
		add_attunement_the_instrument_of_desire = @ascension_perk_attunement1
	}

	ai_weight = {
		factor = 10
		modifier = {
			factor = 2
			has_ethic = ethic_pacifist
		}
		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_pacifist
		}
		modifier = {
			factor = 2
			has_ethic = ethic_materialist
		}
		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_materialist
		}
	}
}

ap_detox = {
	potential = {
		host_has_dlc = "Toxoids Species Pack"
		NOT = {
			has_ascension_perk = ap_detox
			has_country_flag = knights_detox
		}
	}

	possible = {
		custom_tooltip = {
			fail_text = "requires_technology_tech_climate_restoration"
			has_technology = tech_climate_restoration
		}
	}

	on_enabled = {
		custom_tooltip = "detox_tox_worlds"
	}

	modifier = {
		terraform_speed_mult = 0.33
		add_attunement_the_composer_of_strands = @ascension_perk_attunement1
	}

	ai_weight = {
		factor = 20
		modifier = {
			factor = 0
			NOT = {
				any_planet_within_border = {
					has_modifier = toxic_terraforming_candidate
				}
			}
		}
		modifier = {
			factor = 3
			count_planet_within_border = {
				count > 2
				limit = { has_modifier = toxic_terraforming_candidate }
			}
		}
	}
}