namespace = ascension_trait_fix

country_event = {
	id = ascension_trait_fix.0
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		every_owned_leader = {
			# Synth trait
			if = {
				limit = {
					owner = {
						OR = {
							AND = {
								has_tradition = tr_synthetics_finish
								has_country_flag = synthetic_empire
							}
							has_tradition = tr_modularity_finish
						}
					}
					species = { 
						NOR = {
							species = { has_trait = trait_robot_digital_1 }
							species = { has_trait = trait_robot_digital_2 }
						} 
					}
					NOT = { has_trait = leader_trait_synthetic }
				}
				add_trait = {
					trait = leader_trait_synthetic
					show_message = no
				}
			}
			
			# Virtual trait
			if = {
				limit = {
					OR = {
						species = { has_trait = trait_robot_digital_1 }
						species = { has_trait = trait_robot_digital_2 }
					}
					NOT = { has_trait = leader_trait_virtual }
				}
				add_trait = {
					trait = leader_trait_virtual
					show_message = no
				}
			}
			
			# Psychic trait
			if = {
				limit = {
					species = { is_psionic_species = yes }
					NOR = {
						has_trait = leader_trait_psionic 
						has_trait = leader_trait_chosen 
						has_trait = leader_trait_composer_chosen 
						has_trait = leader_trait_instrument_chosen 
						has_trait = leader_trait_eater_chosen 
						has_trait = leader_trait_cradle_chosen 
						has_trait = leader_trait_whisperers_chosen 
						has_trait = leader_trait_shroudshaper 
					}
				}
				add_trait = {
					trait = leader_trait_psionic
					show_message = no
				}
			}
			
			# Erudite trait
			if = {
				limit = {
					species = { has_trait = trait_erudite }
					NOT = { has_trait = leader_trait_erudite }
				}
				add_trait = {
					trait = leader_trait_erudite
					show_message = no
				}
			}
			
			# Cyborg trait
			if = {
				limit = {
					species = { has_trait = trait_cybernetic }
					NOT = { has_trait = leader_trait_cyborg }
				}
				add_trait = {
					trait = leader_trait_cyborg
					show_message = no
				}
			}
			
			# Limited Cyborg trait
			if = {
				limit = {
					species = { has_trait = trait_limited_cybernetic }
					NOT = { has_trait = leader_trait_limited_cyborg }
				}
				add_trait = {
					trait = leader_trait_limited_cyborg
					show_message = no
				}
			}
		}
	}
}

event = {
	id = ascension_trait_fix.1
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		every_country = { 
			limit = {
				is_ai = no
			}
			country_event = { id = ascension_trait_fix.0 }
		}
	}
}

event = {
	id = ascension_trait_fix.2
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		every_country = { 
			limit = {
				is_ai = yes
			}
			country_event = { id = ascension_trait_fix.0 }
		}
	}
}